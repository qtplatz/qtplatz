@echo off
set BOOST_VERSION="${BOOST_VERSION}"
set BOOST_ROOT="${BOOST_ROOT}"
set Boost_ROOT="${BOOST_ROOT}"
set BOOST_LIBRARYDIR="${BOOST_LIBRARYDIR}"
set GENERATOR="${GENERATOR}"
set RDBASE="${RDBASE}"

pushd "${RDKIT_BINARY_DIR}"

cmake -DBOOST_LIBRARYDIR=%BOOST_LIBRARYDIR% ^
   	 -DBOOST_ROOT=%BOOST_ROOT% ^
      	 -DBoost_USE_STATIC_LIBS=ON ^
      	 -DRDK_BUILD_INCHI_SUPPORT=ON ^
      	 -DRDK_BUILD_PYTHON_WRAPPERS=OFF ^
      	 -DRDK_BUILD_SWIG_JAVA_WRAPPER=OFF ^
      	 -DRDK_INSTALL_STATIC_LIBS=OFF ^
	 -DRDK_INSTALL_DYNAMIC_LIBS=ON ^
	 -DRDK_INSTALL_INTREE=ON ^
      	 -DCMAKE_DEBUG_POSTFIX="d" -G %GENERATOR% %RDBASE%

:: if RDK_INSTALL_INTREE=OFF, RDBoost includes are completely missed out!

echo msbuild /m:%NUMBER_OF_PROCESSORS% /p:Configuration=Debug INSTALL.vcxproj > build-debug.bat
echo msbuild /m:%NUMBER_OF_PROCESSORS% /p:Configuration=Release INSTALL.vcxproj > build-release.bat
echo "rdkit build environment set up complete."
echo "run build-release.bat manually."
